<!DOCTYPE html>
<html>
  <meta charset="utf-8">
  <head>
    <title></title>
    <link rel='stylesheet' href='/cssstyle/style.css' />
    <link rel='stylesheet' href='/cssstyle/style_2.css' />
  </head>
  <body>
    <div class="all">
      <div class="content">
        <div class="left">
          <div id="dosomething">
            <li><a href="/background?book_type="><span class="icon-home font_css" id="changecolor"></span><span class="font-header">首页</span></a></li>
            <li><a href="/background?book_type=科普"><span class="icon-compass font_css"></span><span class="font-header">科普</span></a></li>
            <li><a href="/background?book_type=人物"><span class="icon-newspaper font_css"></span><span class="font-header">人物</span></a></li>
            <li><a href="/background?book_type=历史"><span class="icon-clock font_css"></span><span class="font-header">历史</span></a></li>
            <li><a href="/background?book_type=人文"><span class="icon-compass2 font_css"></span><span class="font-header">人文</span></a></li>
            <li><a href="/background?book_type=名著"><span class="icon-book font_css"></span><span class="font-header">名著</span></a></li>
          </div>
        </div>
      <div class="right">
      <div class="body">
        <div class="body_top">
          <div class="bottom" id="bottom"><span class="icon-folder-upload"></span>上传</div>
        </div>
        <div class="body_arise">
           <% for (var i = 0; i < data.length; i++) { %>
           <% if (type == '') { %>
          <div class="data"><li class="data-left"><%= data[i].name %></li><li class="data-right"> <a href="/background/look?getup=<%= data[i].name %>" ><span class="icon-eye">查看</span></a> <a href="/background/delect?gitup=<%= data[i].name %>" ><span class="icon-trash-o">删除</span></a> <a href="/background/change?gitup=<%= data[i].name %>"<span class="icon-zoom-in">修改</span></a> <a href="/background/animation?gitup=<%= data[i].name %>"<span class="icon-cog">设为推荐</span></a> <a href="/background/cancel?gitup=<%= data[i].name %>"<span class="icon-cog">取消设置</span></a></li></div>
           <% } else {%>
           <% if (data[i].types === type) { %>
             <div class="data"><li class="data-left"><%= data[i].name %></li><li class="data-right"> <a href="/background/look?getup=<%= data[i].name %>" ><span class="icon-eye">查看</span></a> <a href="/background/delect?gitup=<%= data[i].name %>" ><span class="icon-trash-o">删除</span></a> <a href="/background/change?gitup=<%= data[i].name %>"<span class="icon-zoom-in">修改</span></a> <a href="/background/animation?gitup=<%= data[i].name %>"<span class="icon-cog">设为推荐</span></a> <a href="/background/cancel?gitup=<%= data[i].name %>"<span class="icon-cog">取消设置</span></a></li></div>
           <% }%>
           <% }%>
           <% } %>
        </div>
      </div>
      </div>
      </div>
      <div class="none">
        <div class="display_none" id="display_none" style="display: none">
          <div class="display_town">
          <form method='post' enctype="multipart/form-data" action="/update">
            <div class="frist_text">
              <input type="submit" value="提交" id="submit"/><input type="reset" id="reset"/><button id="button">取消</button>
              <select required="required" name="book_select" id="select">
                <option disabled="disabled">选择你要提交的类型</option>
                <option value="科普">科普</option>
                <option value="人物">人物</option>
                <option value="历史">历史</option>
                <option value="人文">人文</option>
                <option value="名著">名著</option>
              </select>
            </div>
            <li>图书书名: <input type="text" placeholder="不能含有非法字符|.:@$&*|" required="required" name="book_name" pattern="[^@#\$%\^&\*\.:]+"/></li>
            <li>图书作者: <input type="text" required="required" name="book_auther" /></li>
            <li>图书评分: <input type="text" placeholder="分数只能在1-5分之间" required="required" pattern="[0-5]" name="book_gaden"/></li>
            <li>文件大小: <input type="text" required="required" placeholder="不能大于20M" name="book_size"/></li>
            <li>图书章数: <input type="text" required="required" name="book_num"/></li>
            <li>zip 文件: <input type="file" name="book_file"  accept="aplication/zip" title="只支持zip文件类型上传"/></li>
            <li>pdf 文件: <input type="file" name="book_file"  accept="aplication/zip" title="只支持pdf文件类型上传"/></li>
            <li>上传照片: <input type="file" required="required" name="book_image"  title="只支持图片类型上传"/></li>
            <li>图书简介</li>
            <div class="last_texts"><textarea required="required" class="last_text" name="book_introduce" placeholder="如果信息框一部分被遮蔽可滑动鼠标将其恢复"/></textarea></div>
          </form>
          </div>
        </div>
      </div>
    </div>



    <script>
      var dosomething = document.getElementById('dosomething');
      var dosomethings = dosomething.getElementsByTagName('li');
      var dosomethingsspan = dosomething.getElementsByTagName('span');
      var display_none = document.getElementById('display_none');
      var screenX = document.documentElement.clientWidth;
      var screenY = document.documentElement.clientHeight;
      var bottom = document.getElementById('bottom');
      var button = document.getElementById('button');
     

      function autoarise(){
        // console.log("<%=type %>");
        // console.log(dosomethings[1].nodeValue );
        for (var c = 0; c < dosomethings.length; c++) {
           //console.log(dosomethings[c].innerText);
            if(dosomethings[c].innerText == "<%=type %>"){
              for (var n =0; n<dosomethingsspan.length; n++){
                dosomethingsspan[n].setAttribute("id", "")
              }
              console.log(c);
              if(c !== 0){
                dosomethingsspan[((c+1)*2)-1].setAttribute("id", "changecolor")
              }else{
                dosomethingsspan[0].setAttribute("id", "changecolor")
              }
            }
        }
      }

      bottom.onclick = function form_arise(){
        display_none.style.display = "block";
      }
      button.onclick = function form_die(){
        display_none.style.display = "none";
      }

      window.onload = function() {
        display_none.style.left = ((screenX/2)-300)+ 'px';
        display_none.style.top = ((screenY/2)-300)+ 'px';
        autoarise();
      }

    </script>
  </body>
</html>
